{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useCallback, useEffect, useReducer, useState } from 'react';\nimport { ariaDescribedByIds, parseDateString, toDateString, pad, TranslatableString } from '@rjsf/utils';\nfunction rangeOptions(start, stop) {\n  const options = [];\n  for (let i = start; i <= stop; i++) {\n    options.push({\n      value: i,\n      label: pad(i, 2)\n    });\n  }\n  return options;\n}\nfunction readyForChange(state) {\n  return Object.values(state).every(value => value !== -1);\n}\nfunction dateElementProps(state, time, yearsRange = [1900, new Date().getFullYear() + 2]) {\n  const {\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second\n  } = state;\n  const data = [{\n    type: 'year',\n    range: yearsRange,\n    value: year\n  }, {\n    type: 'month',\n    range: [1, 12],\n    value: month\n  }, {\n    type: 'day',\n    range: [1, 31],\n    value: day\n  }];\n  if (time) {\n    data.push({\n      type: 'hour',\n      range: [0, 23],\n      value: hour\n    }, {\n      type: 'minute',\n      range: [0, 59],\n      value: minute\n    }, {\n      type: 'second',\n      range: [0, 59],\n      value: second\n    });\n  }\n  return data;\n}\nfunction DateElement({\n  type,\n  range,\n  value,\n  select,\n  rootId,\n  name,\n  disabled,\n  readonly,\n  autofocus,\n  registry,\n  onBlur,\n  onFocus\n}) {\n  const id = rootId + '_' + type;\n  const {\n    SelectWidget\n  } = registry.widgets;\n  return _jsx(SelectWidget, {\n    schema: {\n      type: 'integer'\n    },\n    id: id,\n    name: name,\n    className: 'form-control',\n    options: {\n      enumOptions: rangeOptions(range[0], range[1])\n    },\n    placeholder: type,\n    value: value,\n    disabled: disabled,\n    readonly: readonly,\n    autofocus: autofocus,\n    onChange: value => select(type, value),\n    onBlur: onBlur,\n    onFocus: onFocus,\n    registry: registry,\n    label: '',\n    \"aria-describedby\": ariaDescribedByIds(rootId)\n  });\n}\n/** The `AltDateWidget` is an alternative widget for rendering date properties.\n * @param props - The `WidgetProps` for this component\n */\nfunction AltDateWidget({\n  time = false,\n  disabled = false,\n  readonly = false,\n  autofocus = false,\n  options,\n  id,\n  name,\n  registry,\n  onBlur,\n  onFocus,\n  onChange,\n  value\n}) {\n  const {\n    translateString\n  } = registry;\n  const [lastValue, setLastValue] = useState(value);\n  const [state, setState] = useReducer((state, action) => {\n    return {\n      ...state,\n      ...action\n    };\n  }, parseDateString(value, time));\n  useEffect(() => {\n    const stateValue = toDateString(state, time);\n    if (readyForChange(state) && stateValue !== value) {\n      // The user changed the date to a new valid data via the comboboxes, so call onChange\n      onChange(stateValue);\n    } else if (lastValue !== value) {\n      // We got a new value in the props\n      setLastValue(value);\n      setState(parseDateString(value, time));\n    }\n  }, [time, value, onChange, state, lastValue]);\n  const handleChange = useCallback((property, value) => {\n    setState({\n      [property]: value\n    });\n  }, []);\n  const handleSetNow = useCallback(event => {\n    event.preventDefault();\n    if (disabled || readonly) {\n      return;\n    }\n    const nextState = parseDateString(new Date().toJSON(), time);\n    onChange(toDateString(nextState, time));\n  }, [disabled, readonly, time]);\n  const handleClear = useCallback(event => {\n    event.preventDefault();\n    if (disabled || readonly) {\n      return;\n    }\n    onChange(undefined);\n  }, [disabled, readonly, onChange]);\n  return _jsxs(\"ul\", {\n    className: 'list-inline',\n    children: [dateElementProps(state, time, options.yearsRange).map((elemProps, i) => _jsx(\"li\", {\n      className: 'list-inline-item',\n      children: _jsx(DateElement, {\n        rootId: id,\n        name: name,\n        select: handleChange,\n        ...elemProps,\n        disabled: disabled,\n        readonly: readonly,\n        registry: registry,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        autofocus: autofocus && i === 0\n      })\n    }, i)), (options.hideNowButton !== 'undefined' ? !options.hideNowButton : true) && _jsx(\"li\", {\n      className: 'list-inline-item',\n      children: _jsx(\"a\", {\n        href: '#',\n        className: 'btn btn-info btn-now',\n        onClick: handleSetNow,\n        children: translateString(TranslatableString.NowLabel)\n      })\n    }), (options.hideClearButton !== 'undefined' ? !options.hideClearButton : true) && _jsx(\"li\", {\n      className: 'list-inline-item',\n      children: _jsx(\"a\", {\n        href: '#',\n        className: 'btn btn-warning btn-clear',\n        onClick: handleClear,\n        children: translateString(TranslatableString.ClearLabel)\n      })\n    })]\n  });\n}\nexport default AltDateWidget;","map":{"version":3,"names":["useCallback","useEffect","useReducer","useState","ariaDescribedByIds","parseDateString","toDateString","pad","TranslatableString","rangeOptions","start","stop","options","i","push","value","label","readyForChange","state","Object","values","every","dateElementProps","time","yearsRange","Date","getFullYear","year","month","day","hour","minute","second","data","type","range","DateElement","select","rootId","name","disabled","readonly","autofocus","registry","onBlur","onFocus","id","SelectWidget","widgets","_jsx","schema","className","enumOptions","placeholder","onChange","AltDateWidget","translateString","lastValue","setLastValue","setState","action","stateValue","handleChange","property","handleSetNow","event","preventDefault","nextState","toJSON","handleClear","undefined","_jsxs","children","map","elemProps","hideNowButton","href","onClick","NowLabel","hideClearButton","ClearLabel"],"sources":["D:\\Reactjs\\my-app\\node_modules\\@rjsf\\core\\src\\components\\widgets\\AltDateWidget.tsx"],"sourcesContent":["import { MouseEvent, useCallback, useEffect, useReducer, useState } from 'react';\nimport {\n  ariaDescribedByIds,\n  parseDateString,\n  toDateString,\n  pad,\n  DateObject,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  WidgetProps,\n} from '@rjsf/utils';\n\nfunction rangeOptions(start: number, stop: number) {\n  const options = [];\n  for (let i = start; i <= stop; i++) {\n    options.push({ value: i, label: pad(i, 2) });\n  }\n  return options;\n}\n\nfunction readyForChange(state: DateObject) {\n  return Object.values(state).every((value) => value !== -1);\n}\n\nfunction dateElementProps(\n  state: DateObject,\n  time: boolean,\n  yearsRange: [number, number] = [1900, new Date().getFullYear() + 2]\n) {\n  const { year, month, day, hour, minute, second } = state;\n  const data = [\n    {\n      type: 'year',\n      range: yearsRange,\n      value: year,\n    },\n    { type: 'month', range: [1, 12], value: month },\n    { type: 'day', range: [1, 31], value: day },\n  ] as { type: string; range: [number, number]; value: number | undefined }[];\n  if (time) {\n    data.push(\n      { type: 'hour', range: [0, 23], value: hour },\n      { type: 'minute', range: [0, 59], value: minute },\n      { type: 'second', range: [0, 59], value: second }\n    );\n  }\n  return data;\n}\n\ntype DateElementProps<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> = Pick<\n  WidgetProps<T, S, F>,\n  'value' | 'name' | 'disabled' | 'readonly' | 'autofocus' | 'registry' | 'onBlur' | 'onFocus'\n> & {\n  rootId: string;\n  select: (property: keyof DateObject, value: any) => void;\n  type: string;\n  range: [number, number];\n};\n\nfunction DateElement<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  type,\n  range,\n  value,\n  select,\n  rootId,\n  name,\n  disabled,\n  readonly,\n  autofocus,\n  registry,\n  onBlur,\n  onFocus,\n}: DateElementProps<T, S, F>) {\n  const id = rootId + '_' + type;\n  const { SelectWidget } = registry.widgets;\n  return (\n    <SelectWidget\n      schema={{ type: 'integer' } as S}\n      id={id}\n      name={name}\n      className='form-control'\n      options={{ enumOptions: rangeOptions(range[0], range[1]) }}\n      placeholder={type}\n      value={value}\n      disabled={disabled}\n      readonly={readonly}\n      autofocus={autofocus}\n      onChange={(value: any) => select(type as keyof DateObject, value)}\n      onBlur={onBlur}\n      onFocus={onFocus}\n      registry={registry}\n      label=''\n      aria-describedby={ariaDescribedByIds<T>(rootId)}\n    />\n  );\n}\n\n/** The `AltDateWidget` is an alternative widget for rendering date properties.\n * @param props - The `WidgetProps` for this component\n */\nfunction AltDateWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  time = false,\n  disabled = false,\n  readonly = false,\n  autofocus = false,\n  options,\n  id,\n  name,\n  registry,\n  onBlur,\n  onFocus,\n  onChange,\n  value,\n}: WidgetProps<T, S, F>) {\n  const { translateString } = registry;\n  const [lastValue, setLastValue] = useState(value);\n  const [state, setState] = useReducer((state: DateObject, action: Partial<DateObject>) => {\n    return { ...state, ...action };\n  }, parseDateString(value, time));\n\n  useEffect(() => {\n    const stateValue = toDateString(state, time);\n    if (readyForChange(state) && stateValue !== value) {\n      // The user changed the date to a new valid data via the comboboxes, so call onChange\n      onChange(stateValue);\n    } else if (lastValue !== value) {\n      // We got a new value in the props\n      setLastValue(value);\n      setState(parseDateString(value, time));\n    }\n  }, [time, value, onChange, state, lastValue]);\n\n  const handleChange = useCallback((property: keyof DateObject, value: string) => {\n    setState({ [property]: value });\n  }, []);\n\n  const handleSetNow = useCallback(\n    (event: MouseEvent<HTMLAnchorElement>) => {\n      event.preventDefault();\n      if (disabled || readonly) {\n        return;\n      }\n      const nextState = parseDateString(new Date().toJSON(), time);\n      onChange(toDateString(nextState, time));\n    },\n    [disabled, readonly, time]\n  );\n\n  const handleClear = useCallback(\n    (event: MouseEvent<HTMLAnchorElement>) => {\n      event.preventDefault();\n      if (disabled || readonly) {\n        return;\n      }\n      onChange(undefined);\n    },\n    [disabled, readonly, onChange]\n  );\n\n  return (\n    <ul className='list-inline'>\n      {dateElementProps(state, time, options.yearsRange as [number, number] | undefined).map((elemProps, i) => (\n        <li className='list-inline-item' key={i}>\n          <DateElement\n            rootId={id}\n            name={name}\n            select={handleChange}\n            {...elemProps}\n            disabled={disabled}\n            readonly={readonly}\n            registry={registry}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            autofocus={autofocus && i === 0}\n          />\n        </li>\n      ))}\n      {(options.hideNowButton !== 'undefined' ? !options.hideNowButton : true) && (\n        <li className='list-inline-item'>\n          <a href='#' className='btn btn-info btn-now' onClick={handleSetNow}>\n            {translateString(TranslatableString.NowLabel)}\n          </a>\n        </li>\n      )}\n      {(options.hideClearButton !== 'undefined' ? !options.hideClearButton : true) && (\n        <li className='list-inline-item'>\n          <a href='#' className='btn btn-warning btn-clear' onClick={handleClear}>\n            {translateString(TranslatableString.ClearLabel)}\n          </a>\n        </li>\n      )}\n    </ul>\n  );\n}\n\nexport default AltDateWidget;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}